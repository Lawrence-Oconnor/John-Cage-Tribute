{"ast":null,"code":"import axios from'axios';import store from'../store';import{LOGOUT}from'../actions/types';var api=axios.create({baseURL:'/api',headers:{'Content-Type':'application/json'}});/**\n intercept any error responses from the api\n and check if the token is no longer valid.\n ie. Token has expired\n logout the user if the token has expired\n**/api.interceptors.response.use(function(res){return res;},function(err){if(err.response.data.msg==='Token is not valid'){store.dispatch({type:LOGOUT});}return Promise.reject(err);});export default api;","map":{"version":3,"sources":["/home/serv/John-Cage-Tribute/server2/client/src/utils/api.js"],"names":["axios","store","LOGOUT","api","create","baseURL","headers","interceptors","response","use","res","err","data","msg","dispatch","type","Promise","reject"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CACA,OAASC,MAAT,KAAuB,kBAAvB,CAEA,GAAMC,CAAAA,GAAG,CAAGH,KAAK,CAACI,MAAN,CAAa,CACvBC,OAAO,CAAE,MADc,CAEvBC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFc,CAAb,CAAZ,CAMA;;;;;GAOAH,GAAG,CAACI,YAAJ,CAAiBC,QAAjB,CAA0BC,GAA1B,CACE,SAAAC,GAAG,QAAIA,CAAAA,GAAJ,EADL,CAEE,SAAAC,GAAG,CAAI,CACL,GAAIA,GAAG,CAACH,QAAJ,CAAaI,IAAb,CAAkBC,GAAlB,GAA0B,oBAA9B,CAAoD,CAClDZ,KAAK,CAACa,QAAN,CAAe,CAAEC,IAAI,CAAEb,MAAR,CAAf,EACD,CACD,MAAOc,CAAAA,OAAO,CAACC,MAAR,CAAeN,GAAf,CAAP,CACD,CAPH,EAUA,cAAeR,CAAAA,GAAf","sourcesContent":["import axios from 'axios';\nimport store from '../store';\nimport { LOGOUT } from '../actions/types';\n\nconst api = axios.create({\n  baseURL: '/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n/**\n intercept any error responses from the api\n and check if the token is no longer valid.\n ie. Token has expired\n logout the user if the token has expired\n**/\n\napi.interceptors.response.use(\n  res => res,\n  err => {\n    if (err.response.data.msg === 'Token is not valid') {\n      store.dispatch({ type: LOGOUT });\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}